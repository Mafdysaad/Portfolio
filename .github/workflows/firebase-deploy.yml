name: Deploy Flutter Web to Firebase Hosting

on:
  push:
    branches:
      - main  # ÙŠØ¹Ù…Ù„ Ø¹Ù†Ø¯ Ø£ÙŠ ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ› ï¸ Ø³Ø­Ø¨ Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† GitHub
        uses: actions/checkout@v3

      - name: ğŸ”§ ØªØ«Ø¨ÙŠØª Flutter
        uses: subosito/flutter-action@v2
        with:
          flutter-version: "3.x"

      - name: ğŸ“¦ ØªØ«Ø¨ÙŠØª Ø§Ù„Ù€ Dependencies
        run: flutter pub get

      - name: ğŸš€ Ø¨Ù†Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ Flutter Web
        run: flutter build web

      - name: ğŸ”¥ ØªØ«Ø¨ÙŠØª Firebase CLI
        run: npm install -g firebase-tools

      - name: ğŸ”‘ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Firebase Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Secret Key
        run: firebase use --add mafdysaad-affa9 --token ${{ secrets.FIREBASE_TOKEN }}

      - name: ğŸŒ Ù†Ø´Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Firebase Hosting
        run: firebase deploy --token ${{ secrets.FIREBASE_TOKEN }}
